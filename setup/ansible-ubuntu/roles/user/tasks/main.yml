---
- name: remove the motd banner
  net_banner:
    banner: motd
    state: absent

- name: account $HOME
  shell: "echo $HOME"
  register: account_home
  changed_when: false
  check_mode: false

- name: Quite the login prompt
  file:
    dest: "{{ account_home }}/.hushlogin"
    state: touch
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775

- name: Create config directory
  file:
    path: "{{ account_home }}/.config"
    state: directory
    recurse: true
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775

- name: Create neofetch directory
  file:
    path: "{{ account_home }}/.config/neofetch"
    state: directory
    recurse: true
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775

- name: Add custom neofetch config
  copy:
    src: neofetch.conf
    dest: "{{ account_home }}/.config/neofetch/config.conf"
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775

- name: Add small neofetch raspberry pi logo
  copy:
    src: rpi-small
    dest: "{{ account_home }}/.config/neofetch/rpi-small"
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775

- name: Enable neofetch on login
  copy:
    content: "neofetch --source {{ account_home }}/.config/neofetch/rpi-small"
    dest: "{{ account_home }}/.bash_profile"
    group: "users"
    owner: "{{ ansible_user }}"
    mode: 0775
